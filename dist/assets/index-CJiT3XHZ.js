import{q as et,V as nt,t as it,o as st,v as at,w as U,k as X,x as rt,y as ot,z as lt,B as ut,C as ct,D as ft,E as mt,F as ht,S as pt,H as dt,G as C,I as gt,J as yt,K as At,N as St}from"./index-D9fbQM-Y.js";const Et=(e,t,n)=>{const i=t-e;return((n-e)%i+i)%i+e};function Y(e,t){return et(e)?e[Et(0,e.length,t)]:e}class Vt{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=n}attachTimeline(t){const n=this.animations.map(i=>i.attachTimeline(t));return()=>{n.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){return k(this.animations,"duration")}get iterationDuration(){return k(this.animations,"iterationDuration")}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function k(e,t){let n=0;for(let i=0;i<e.length;i++){const s=e[i][t];s!==null&&s>n&&(n=s)}return n}class vt extends Vt{then(t,n){return this.finished.finally(t).then(()=>{})}}function Dt(e,t){return e in t}class Mt extends nt{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(Dt(n,t)){const i=t[n];if(typeof i=="string"||typeof i=="number")return i}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return it()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function j(e){return typeof e=="object"&&!Array.isArray(e)}function Z(e,t,n,i){return e==null?[]:typeof e=="string"&&j(t)?st(e,n,i):e instanceof NodeList?Array.from(e):Array.isArray(e)?e.filter(s=>s!=null):[e]}function Tt(e,t,n){return e*(t+1)}function q(e,t,n,i){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):i.get(t)??e}function bt(e,t,n){for(let i=0;i<e.length;i++){const s=e[i];s.at>t&&s.at<n&&(U(e,s),i--)}}function xt(e,t,n,i,s,c){bt(e,s,c);for(let a=0;a<t.length;a++)e.push({value:t[a],at:at(s,c,i[a]),easing:Y(n,a)})}function Ot(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function wt(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const Gt="easeInOut";function It(e,{defaultTransition:t={},...n}={},i,s){const c=t.duration||.3,a=new Map,l=new Map,r={},f=new Map;let S=0,u=0,F=0;for(let M=0;M<e.length;M++){const p=e[M];if(typeof p=="string"){f.set(p,u);continue}else if(!Array.isArray(p)){f.set(p.name,q(u,p.at,S,f));continue}let[v,d,m={}]=p;m.at!==void 0&&(u=q(u,m.at,S,f));let h=0;const T=(g,b,E,D=0,x=0)=>{const o=Ft(g),{delay:O=0,times:y=rt(o),type:L=t.type||"keyframes",repeat:K,repeatType:Rt,repeatDelay:_t=0,...tt}=b;let{ease:V=t.ease||"easeOut",duration:A}=b;const W=typeof O=="function"?O(D,x):O,z=o.length,P=ut(L)?L:s==null?void 0:s[L||"keyframes"];if(z<=2&&P){let w=100;if(z===2&&Bt(o)){const G=o[1]-o[0];w=Math.abs(G)}const N={...t,...tt};A!==void 0&&(N.duration=ct(A));const B=ot(N,w,P);V=B.ease,A=B.duration}A??(A=c);const R=u+W;y.length===1&&y[0]===0&&(y[1]=1);const _=y.length-o.length;if(_>0&&lt(y,_),o.length===1&&o.unshift(null),K){A=Tt(A,K);const w=[...o],N=[...y];V=Array.isArray(V)?[...V]:[V];const B=[...V];for(let G=0;G<K;G++){o.push(...w);for(let I=0;I<w.length;I++)y.push(N[I]+(G+1)),V.push(I===0?"linear":Y(B,I-1))}Ot(y,K)}const H=R+A;xt(E,o,V,y,R,H),h=Math.max(W+A,h),F=Math.max(H,F)};if(X(v)){const g=J(v,l);T(d,m,Q("default",g))}else{const g=Z(v,d,i,r),b=g.length;for(let E=0;E<b;E++){d=d,m=m;const D=g[E],x=J(D,l);for(const o in d)T(d[o],Kt(m,o),Q(o,x),E,b)}}S=u,u+=h}return l.forEach((M,p)=>{for(const v in M){const d=M[v];d.sort(wt);const m=[],h=[],T=[];for(let D=0;D<d.length;D++){const{at:x,value:o,easing:O}=d[D];m.push(o),h.push(ft(0,F,x)),T.push(O||"easeOut")}h[0]!==0&&(h.unshift(0),m.unshift(m[0]),T.unshift(Gt)),h[h.length-1]!==1&&(h.push(1),m.push(null)),a.has(p)||a.set(p,{keyframes:{},transition:{}});const g=a.get(p);g.keyframes[v]=m;const{type:b,...E}=t;g.transition[v]={...E,duration:F,ease:T,times:h,...n}}}),a}function J(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function Q(e,t){return t[e]||(t[e]=[]),t[e]}function Ft(e){return Array.isArray(e)?e:[e]}function Kt(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const Nt=e=>typeof e=="number",Bt=e=>e.every(Nt);function Ct(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=mt(e)&&!ht(e)?new pt(t):new dt(t);n.mount(e),C.set(e,n)}function Lt(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new Mt(t);n.mount(e),C.set(e,n)}function jt(e,t){return X(e)||typeof e=="number"||typeof e=="string"&&!j(t)}function $(e,t,n,i){const s=[];if(jt(e,t))s.push(gt(e,j(t)&&t.default||t,n&&(n.default||n)));else{if(e==null)return s;const c=Z(e,t,i),a=c.length;for(let l=0;l<a;l++){const r=c[l],f=r instanceof Element?Ct:Lt;C.has(r)||f(r);const S=C.get(r),u={...n};"delay"in u&&typeof u.delay=="function"&&(u.delay=u.delay(l,a)),s.push(...yt(S,{...t,transition:u},{}))}}return s}function Wt(e,t,n){const i=[],s=e.map(a=>{if(Array.isArray(a)&&typeof a[0]=="function"){const l=a[0],r=At(0);return r.on("change",l),a.length===1?[r,[0,1]]:a.length===2?[r,[0,1],a[1]]:[r,a[1],a[2]]}return a});return It(s,t,n,{spring:St}).forEach(({keyframes:a,transition:l},r)=>{i.push(...$(r,a,l))}),i}function zt(e){return Array.isArray(e)&&e.some(Array.isArray)}function Pt(e={}){const{scope:t,reduceMotion:n}=e;function i(s,c,a){let l=[],r;if(zt(s))l=Wt(s,n!==void 0?{reduceMotion:n,...c}:c,t);else{const{onComplete:S,...u}=a||{};typeof S=="function"&&(r=S),l=$(s,c,n!==void 0?{reduceMotion:n,...u}:u,t)}const f=new vt(l);return r&&f.finished.then(r),t&&(t.animations.push(f),f.finished.then(()=>{U(t.animations,f)})),f}return i}const kt=Pt();export{kt as a,Pt as c};
