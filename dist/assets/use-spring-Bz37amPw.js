import{O as d,k as V,a1 as h,a as m,M as C}from"./index-D9fbQM-Y.js";import{a as x}from"./use-combine-values-BzzlWlNz.js";import{u as F}from"./use-transform-c1Zrb0KJ.js";function M(t,n,i={}){const r=t.get();let e=null,f=r,c;const l=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,u=()=>{e&&(e.stop(),e=null)},S=()=>{u();const o=y(t.get()),s=y(f);o!==s&&(e=new h({keyframes:[o,s],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:c}))};if(t.attach((o,s)=>{f=o,c=a=>s(g(a,l)),d.postRender(()=>{var a;S(),(a=t.events.animationStart)==null||a.notify(),e==null||e.then(()=>{var p;(p=t.events.animationComplete)==null||p.notify()})})},u),V(n)){const o=n.on("change",a=>t.set(g(a,l))),s=t.on("destroy",o);return()=>{o(),s()}}return u}function g(t,n){return n?t+n:t}function y(t){return typeof t=="number"?t:parseFloat(t)}function O(t,n={}){const{isStatic:i}=m.useContext(C),r=()=>V(t)?t.get():t;if(i)return F(r);const e=x(r());return m.useInsertionEffect(()=>M(e,t,n),[e,JSON.stringify(n)]),e}function A(t,n={}){return O(t,{type:"spring",...n})}export{A as u};
